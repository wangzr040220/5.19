# 自然语言转SQL查询工具

这是一个基于Python Flask的Web应用程序，可以将自然语言查询转换为SQL语句并在MySQL数据库中执行。本应用使用DeepSeek-V3大语言模型进行自然语言到SQL的转换，并采用API密钥轮换机制以提高可用性。

## 功能特点

- 使用DeepSeek-V3大语言模型将自然语言转换为SQL查询
- 自动获取数据库表结构和列描述信息
- 实时执行SQL查询并展示结果
- 美观的用户界面
- 支持复制生成的SQL语句
- API密钥自动轮换，提高系统可用性

## 安装步骤

1. 克隆或下载本项目代码
2. 安装依赖包：
   ```
   cd sql_translator
   pip install -r requirements.txt
   ```
3. 配置环境变量：
   - 编辑`.env`文件，设置MySQL数据库连接信息
   - API密钥已内置在代码中，采用轮换机制自动切换

## 运行应用

1. 确保MySQL数据库已启动并可访问
2. 在项目根目录下运行：
   ```
   python app.py
   ```
3. 打开浏览器访问：`http://127.0.0.1:5000`

## 使用说明

1. 在输入框中输入自然语言查询，例如"显示所有用户"
2. 点击"转换"按钮将自然语言转换为SQL查询
3. 检查生成的SQL语句，如需修改可直接编辑
4. 点击"执行"按钮在数据库中执行SQL查询
5. 查看查询结果

## 注意事项

- 应用程序连接到localhost上的Final_Project数据库
- 应用会自动获取数据库表结构和列描述，以帮助大语言模型更准确地生成SQL
- 使用API密钥轮换机制，每次请求自动切换不同的API密钥
- 请确保数据库用户有足够的权限执行查询

## API密钥轮换机制

应用程序使用多个API密钥进行轮换，以实现以下目的：
- 提高系统可用性，避免单个密钥的限制
- 分散API请求负载
- 减少单个密钥的使用频率

每次发送请求时，系统会自动选择下一个可用的API密钥，形成一个循环使用的模式。这种机制可以确保系统在某个API密钥达到限制时仍能继续工作。 